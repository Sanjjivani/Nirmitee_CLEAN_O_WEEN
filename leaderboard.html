{% extends "base.html" %}

{% block title %}Leaderboard - CleanEarth Community{% endblock %}

{% block content %}
<div class="leaderboard-container">
    <div class="leaderboard-header">
        <h1>üèÜ Top Contributors of This Month</h1>
        <p class="leaderboard-subtitle">Compete with fellow eco-warriors and climb the ranks!</p>
    </div>

    <!-- User Rank Card -->
    <div class="user-rank-card">
        <div class="user-rank-info">
            <h4>Your Current Rank</h4>
            <p>You are ranked <strong>#{{ user_rank }}</strong> out of {{ users|length }} participants</p>
        </div>
        <div class="user-rank-badge">
            <div class="rank-number">#{{ user_rank }}</div>
            <div class="user-points">{{ user.points }} points</div>
        </div>
    </div>

    <!-- Leaderboard -->
    <div class="leaderboard-card">
        <div class="leaderboard-list">
            {% for user_item in users %}
            <div class="leaderboard-item {% if user_item.id == user.id %}current-user{% endif %} 
                        {% if loop.index == 1 %}first-place{% endif %}
                        {% if loop.index == 2 %}second-place{% endif %}
                        {% if loop.index == 3 %}third-place{% endif %}">
                <div class="rank-position">
                    {% if loop.index == 1 %}
                    <div class="medal gold">
                        <i class="fas fa-crown"></i>
                    </div>
                    {% elif loop.index == 2 %}
                    <div class="medal silver">
                        <i class="fas fa-medal"></i>
                    </div>
                    {% elif loop.index == 3 %}
                    <div class="medal bronze">
                        <i class="fas fa-medal"></i>
                    </div>
                    {% else %}
                    <div class="rank-number">#{{ loop.index }}</div>
                    {% endif %}
                </div>

                <div class="user-info">
                    <div class="user-avatar">
                        {{ user_item.name[0]|upper }}
                    </div>
                    <div class="user-details">
                        <h5>{{ user_item.name }}</h5>
                        <p>{{ user_item.total_cleanups }} cleanups ‚Ä¢ {{ "%.1f"|format(user_item.total_waste) }}kg collected</p>
                    </div>
                </div>

                <div class="user-points">
                    <span class="points-badge">{{ user_item.points }}</span>
                    <small>points</small>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Motivation Section -->
    <div class="motivation-section">
        <div class="card">
            <div class="card-body text-center">
                <h5 class="text-success">üöÄ Keep Going!</h5>
                <p class="text-muted">Every cleanup makes a difference. Track your progress and compete with friends!</p>
                <div class="motivation-stats">
                    <div class="stat">
                        <i class="fas fa-camera text-success"></i>
                        <span>Upload Cleanups</span>
                    </div>
                    <div class="stat">
                        <i class="fas fa-chart-line text-warning"></i>
                        <span>Earn Points</span>
                    </div>
                    <div class="stat">
                        <i class="fas fa-award text-info"></i>
                        <span>Win Prizes</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}